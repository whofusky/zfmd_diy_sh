


    ===============================================================
        防火墙配置脚本使用说明    傅世凯@2019.5.17

    ===============================================================


--------------------------------------------------------------------------------
使用说明：
--------------------

    第一步：按项目现场网络配置编辑cfg/network.conf配置文件

        注意：
        编辑时请注意格式，不要插入不必要的空格、不可见字符等。
        配置项说明详见“配置文件中各配置项说明”一节。

    第二步：把包中文件复制到各台服务器上
        1，以root用户登录到操作系统；
        2，复制本文件包中文件到“/zfmd/safe”文件夹；
        3，如果已经存在/zfmd/safe/fw软件包则修改正确的network.conf到“/zfmd/safe/fw/cfg”文件夹；
        4，在“/zfmd/safe/fw”文件夹中打开一个终端窗口并执行下面命令；
        chmod u+x opfw

    第三步：在各台服务器上执行脚本完成防火墙设置
        1，以root用户登录到操作系统；
        2，在“/zfmd/safe/fw”文件夹中打开一个终端窗口并执行下面命令；
            1) echo $HOSTNAME
                根据出现的主机名是否为配置文件中MY_HOSTNAME配置的值
                如果当前主机名不在上面的范围之内，需要【停止后面步骤的操作】并联系相关人员进行脚本修改再进行以后的步骤
            2)./opfw
                根据出现的提示信息进行选择相应的操作即可
        3，检查执行结果是否正确，或拍照回传确认；

    第四步：观察各服务器软件通信是否正常


    其他：脚本提供了对防火墙的一些操作，执行方法同上。
        1，在本机永久打开防火墙
            ./opfw 然后根据提示输入1

        2，在本机永久停用防火墙
            ./opfw 然后根据提示输入2

        3，查看本机防火墙
            ./opfw 然后根据提示输入4


--------------------------------------------------------------------------------

===============================================================
配置文件中部分配置项说明：

    配置中凡是端口的配置都遵循的规则：
    --------------------------------------------->
    (1)可配单个端口号
    (2)可配连续的端口号但需要用-线连接如 1024-65535
    (3)可配多个不连接端口号用，号分隔如 20,21,1024-65535
    <---------------------------------------------


    配置配置条目时要遵循的规则：
    --------------------------------------------->
    所有的最终要用英文输入法中半角状态的双引号"括起来
           每个条目的基本格式为: ${prtAll}/${srvOp_client}/${op_tcp}/网卡号/local_addr/remoteaddr
           多个条目用 | 隔开，中间可以有换行或空格
          
          每个ip后如果有端口号则格式为 "ip:端口"
          如果端口号是一个范围则配置为 "ip:端口1-端口2"
          ip地址对中可以只有端口号但端口号之前的:不能省略
    
    <---------------------------------------------


    配置文件中共用开关配置说明：
    --------------------------------------------->
        debugFlag=1
            1 只输出将要配置的信息不实际写入系统；
            0 除了输出正常的信息，还将信息写入系统,非调试状态【应该】使用此值

        enablePing=1
            1 开启ping功能
            0 关闭ping功能

        enInterSsh=1
            1 开启内网ip之间的ssh端口(因此气象服务器是一定不会开启的)
            0 不开启

        bindNICByIP=1
            1 根据配置的本地ip自动找对应的网卡号并进行绑定;
            0 不绑定


    <---------------------------------------------
          

--------------------------------------------------------------------------------



